{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["\nconst getCursor = () => {\n  const cursor = document.createElement('span');\n  cursor.classList.add('ityped-cursor');\n  cursor.textContent = '|';\n  return cursor\n}\n\n/**\n * @name setProps\n * @description Set the ityped properties configuration\n * @param {Object} config The configuration properties\n * @return {Promise}\n */\nconst setProps = ({\n  strings = ['AEIOU asiahsa skaonsa', 'SZsiasa'],\n  typeSpeed = 100,\n  backSpeed = 100,\n  backDelay = 100,\n  startDelay = 100,\n  showCursor = true,\n  loop = false\n}) => ({ strings, typeSpeed, backSpeed, backDelay, startDelay, showCursor, loop })\n\nconst insertCursor = (element, cursor) => element.insertAdjacentElement('afterend', cursor);\nconst appendElement = parent => child => document.querySelector(parent).appendChild(child)\nconst getElement = el => document.querySelector(el)\n\nconst init = (el, config) => {\n  const props = setProps(config)\n  const initCursor = appendElement(el)\n  insertCursor(getElement(el), getCursor())\n  walkWithWords(el, props)\n}\n\n// const iterate = (s) => {\n//   const w = \n// }\n\n// Pega o array e itera na primeira posição\nconst walkWithWords = (el, { strings, typeSpeed, backSpeed, backDelay, startDelay, showCursor, loop }) => {\n  const element = getElement(el)\n  const times = []\n  return Promise.all(strings.map((string, index ) => {\n    return ((i) => {\n      const len = string.length - 1\n      let time = startDelay + (len * typeSpeed) + (len * backSpeed)\n      times.push(time)\n      const nextTime = times[i - 1]\n      const t = window.setTimeout(\n        () =>\n          incrementWord(\n            i,\n            time= index === 0 ? startDelay : time,\n            decrementWord,\n            element,\n            { strings, typeSpeed, backSpeed, backDelay, startDelay, showCursor, loop }\n          )\n        , startDelay)\n    })(index)\n  }))\n}\n\n// const incrementWord = (\n//   i,\n//   time,\n//   el,\n//   { strings, typeSpeed, backSpeed, backDelay, startDelay, showCursor, loop }\n// ) => {\n//   return decrement => {\n//     window.setTimeout(() => {\n//       console.log('inc', time)\n//       Array.prototype.forEach.call(strings[i], (letter, index, arr) => {\n//         const t = window.setTimeout(() => {\n//           el.innerHTML += letter\n//           if (index === arr.length - 1) {\n//             window.clearTimeout(t)\n//             decrement(i, time, el, { strings, typeSpeed, backSpeed, backDelay, startDelay, showCursor, loop })\n//           }\n//         }, typeSpeed * index)\n//       }) \n//     }, i === 0 ? startDelay : time + startDelay)\n//   }\n// }\n\nconst incrementWord = (\n  i,\n  time,\n  decrement,\n  el,\n  { strings, typeSpeed, backSpeed, backDelay, startDelay, showCursor, loop }\n) => {\n  return new Promise((resolve, reject) => {\n      window.setTimeout(() => {\n        Array.prototype.forEach.call(strings[i], (letter, index, arr) => {\n          const t = window.setTimeout(() => {\n            el.innerHTML += letter\n            if (index === arr.length - 1) {\n              window.clearTimeout(t)\n              decrement(\n                i, \n                time,\n                el, \n                { strings, typeSpeed, backSpeed, backDelay, startDelay, showCursor, loop },\n                resolve\n              )\n            }\n          }, typeSpeed * index)\n        }) \n      }, time)\n  })\n}\n\nconst decrementWord = (\n  i,\n  time,\n  el,\n  { strings, typeSpeed, backSpeed, backDelay, startDelay, showCursor, loop },\n  resolve\n) => {\n  window.setTimeout(() => {\n    Array.prototype.forEach.call(strings[i], (letter, index, arr) => {\n      const position = el.innerHTML.length - index\n      const tick = window.setTimeout(() => {\n        index === arr.length - 1\n          ? el.innerHTML = el.innerHTML.substring(0, position - 1)\n          : el.innerHTML = el.innerHTML.substring(0, position)\n        if (index === arr.length - 1) {\n          window.clearTimeout(tick)\n          resolve()\n        }\n      }, backSpeed * index)\n    })\n  }, time)\n\n}\n\nexport { init }"],"names":["getCursor","cursor","document","createElement","classList","add","textContent","setProps","strings","typeSpeed","backSpeed","backDelay","startDelay","showCursor","loop","insertCursor","element","insertAdjacentElement","getElement","querySelector","el","init","config","props","walkWithWords","times","Promise","all","map","string","index","i","len","length","time","push","t","window","setTimeout","incrementWord","decrementWord","decrement","resolve","reject","prototype","forEach","call","letter","arr","innerHTML","clearTimeout","position","tick","substring"],"mappings":"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"}